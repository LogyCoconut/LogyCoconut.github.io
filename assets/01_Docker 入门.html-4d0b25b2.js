import{_ as i}from"./plugin-vue_export-helper-c27b6911.js";import{r,o,c,a as e,b as n,d as s,f as l}from"./app-a47e866b.js";const d={},t=l(`<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>强大的容器技术，前后端都用得着
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="教程" tabindex="-1"><a class="header-anchor" href="#教程" aria-hidden="true">#</a> 教程</h2><h3 id="配置加速器" tabindex="-1"><a class="header-anchor" href="#配置加速器" aria-hidden="true">#</a> 配置加速器</h3><p>在 <code>Docker daemon configuration file</code> 中写入</p><p><code>{&quot;registry-mirrors&quot;:[&quot;http://hub-mirror.c.163.com&quot;]}</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># docker 官方中国区镜像</span>
https://registry.docker-cn.com
<span class="token comment"># 网易镜像</span>
http://hub-mirror.c.163.com
<span class="token comment"># 阿里云镜像（专属加速）</span>
https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="容器使用" tabindex="-1"><a class="header-anchor" href="#容器使用" aria-hidden="true">#</a> 容器使用</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 启动一个 alpine 镜像并指定 name</span>
<span class="token comment"># -i 交互式操作</span>
<span class="token comment"># -t 终端</span>
<span class="token comment"># -d 后台运行</span>
<span class="token function">docker</span> run <span class="token parameter variable">-itd</span> <span class="token parameter variable">--name</span> alpine_local alpine /bin/sh

<span class="token comment"># 进入容器</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> eb4e5f3d4f71 /bin/sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="创建镜像" tabindex="-1"><a class="header-anchor" href="#创建镜像" aria-hidden="true">#</a> 创建镜像</h3><h4 id="基于已有的镜像创建" tabindex="-1"><a class="header-anchor" href="#基于已有的镜像创建" aria-hidden="true">#</a> 基于已有的镜像创建</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 在 eb4e5f3d4f71 容器中新增 test.txt 文件，退出容器并提交</span>
<span class="token function">docker</span> commit <span class="token parameter variable">-m</span> <span class="token string">&quot;add test.txt&quot;</span> <span class="token parameter variable">-a</span> <span class="token string">&quot;hall&quot;</span> eb4e5f3d4f71 test:0.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="基于dockerfile来创建-推荐" tabindex="-1"><a class="header-anchor" href="#基于dockerfile来创建-推荐" aria-hidden="true">#</a> 基于Dockerfile来创建（推荐）</h4><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">FROM</span> docker.io/alpine:latest</span>

<span class="token instruction"><span class="token keyword">LABEL</span> version=<span class="token string">&quot;1.0&quot;</span> maintainer=<span class="token string">&quot;Hall &lt;logycoconut@github&gt;&quot;</span></span>

<span class="token instruction"><span class="token keyword">RUN</span> apk upgrade &amp;&amp; \\<span class="token operator">\\</span></span>
    apk add python3

------------------------------------------------------------

<span class="token comment"># 注意最后有个点 .</span>
docker image build -t alpine-python3:1 .
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="导出、加载镜像" tabindex="-1"><a class="header-anchor" href="#导出、加载镜像" aria-hidden="true">#</a> 导出、加载镜像</h3><figure><img src="https://cdn.jsdelivr.net/gh/logycoconut/pic-repo/tools/docker/导出镜像.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 导出 alpine-python3:1 镜像到当前目录</span>
<span class="token function">docker</span> save <span class="token parameter variable">-o</span> alpine-py3.tar alpine-python3:1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="加载镜像" tabindex="-1"><a class="header-anchor" href="#加载镜像" aria-hidden="true">#</a> 加载镜像</h4><figure><img src="https://cdn.jsdelivr.net/gh/logycoconut/pic-repo/tools/docker/加载镜像.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 加载当前目录的 tar 包</span>
<span class="token function">docker</span> load <span class="token parameter variable">-i</span> alpine-py3.tar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="上传镜像" tabindex="-1"><a class="header-anchor" href="#上传镜像" aria-hidden="true">#</a> 上传镜像</h3><ul><li>创建自己的仓库</li></ul><figure><img src="https://cdn.jsdelivr.net/gh/logycoconut/pic-repo/tools/docker/创建仓库.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>查看现有的镜像</li></ul><figure><img src="https://cdn.jsdelivr.net/gh/logycoconut/pic-repo/tools/docker/查看现有的镜像.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>为 <code>alpine-python3</code>打个标签</li></ul><p><code>docker tag alpine-python3:1 logycoconut/test:0.1</code></p><figure><img src="https://cdn.jsdelivr.net/gh/logycoconut/pic-repo/tools/docker/打标签.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>推到远程仓库</li></ul><p><code>docker push logycoconut/test:0.1</code></p><figure><img src="https://cdn.jsdelivr.net/gh/logycoconut/pic-repo/tools/docker/推到远程仓库.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>现在任何人都可以下载你上传的镜像了</li></ul><p><code>docker pull logycoconut/test:0.1</code></p><figure><img src="https://cdn.jsdelivr.net/gh/logycoconut/pic-repo/tools/docker/20221115235714.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="清理镜像" tabindex="-1"><a class="header-anchor" href="#清理镜像" aria-hidden="true">#</a> 清理镜像</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 参数可以是 name 或 id</span>
<span class="token function">docker</span> rmi <span class="token punctuation">[</span>image<span class="token punctuation">]</span>

<span class="token comment"># 删除所有未被容器使用的镜像</span>
<span class="token function">docker</span> image prune <span class="token parameter variable">-a</span>

<span class="token comment"># 删除所有未被使用的容器</span>
<span class="token function">docker</span> container prune <span class="token parameter variable">-a</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常用镜像安装" tabindex="-1"><a class="header-anchor" href="#常用镜像安装" aria-hidden="true">#</a> 常用镜像安装</h2><ul><li><p>Docker安装Alpine</p><p><code>docker run -itd --name alpine-local alpine</code></p></li><li><p>Docker安装Redis</p><p><code>docker run -d --name redis-local -p 6379:6379 redis</code></p></li><li><p>Docker安装MySQL</p><p><code>docker run -d --name mysql-local -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 mysql</code></p></li><li><p>Docker安装Nginx</p><p><code>docker run --name nginx-local -p 8080:80 -d nginx</code></p></li></ul><h2 id="镜像管理-portainer" tabindex="-1"><a class="header-anchor" href="#镜像管理-portainer" aria-hidden="true">#</a> 镜像管理 Portainer</h2><h3 id="portainer容器更新" tabindex="-1"><a class="header-anchor" href="#portainer容器更新" aria-hidden="true">#</a> Portainer容器更新</h3><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code><span class="token comment"># 停止旧容器</span>
docker stop portainer
<span class="token comment"># 删除旧容器</span>
docker rm portainer
<span class="token comment"># 删除旧镜像</span>
docker rmi portainer/portainer
<span class="token comment"># 拉取新镜像</span>
docker pull portainer/portainer-ce
<span class="token comment"># 使用新的镜像启动新的容器</span>
docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock --restart=always --name portainer portainer/portainer-ce
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料" aria-hidden="true">#</a> 参考资料</h2>`,41),p={href:"https://www.yiibai.com/docker",target:"_blank",rel:"noopener noreferrer"},u={href:"https://www.runoob.com/docker/docker-tutorial.html",target:"_blank",rel:"noopener noreferrer"},m={href:"https://www.exception.site/docker",target:"_blank",rel:"noopener noreferrer"},h={href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"},v={href:"https://yeasy.gitbook.io/docker_practice/",target:"_blank",rel:"noopener noreferrer"};function b(g,k){const a=r("ExternalLinkIcon");return o(),c("div",null,[t,e("ul",null,[e("li",null,[e("a",p,[n("易百教程"),s(a)])]),e("li",null,[e("a",u,[n("菜鸟教程-Docker"),s(a)])]),e("li",null,[e("a",m,[n("异常教程-Docker"),s(a)])]),e("li",null,[e("a",h,[n("Docker官方镜像仓库"),s(a)])]),e("li",null,[e("a",v,[n("Docker — 从入门到实践"),s(a)]),n("（⭐️⭐️⭐️）")])])])}const _=i(d,[["render",b],["__file","01_Docker 入门.html.vue"]]);export{_ as default};
