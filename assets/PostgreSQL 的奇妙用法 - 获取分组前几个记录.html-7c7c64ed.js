const s=JSON.parse('{"key":"v-690a21a0","path":"/03_Resource/tech/issure/postgresql/PostgreSQL%20%E7%9A%84%E5%A5%87%E5%A6%99%E7%94%A8%E6%B3%95%20-%20%E8%8E%B7%E5%8F%96%E5%88%86%E7%BB%84%E5%89%8D%E5%87%A0%E4%B8%AA%E8%AE%B0%E5%BD%95.html","title":"PostgreSQL 的奇妙用法 - 获取分组前几个记录","lang":"zh-CN","frontmatter":{"title":"PostgreSQL 的奇妙用法 - 获取分组前几个记录","tag":[],"description":"背景 在以某列为 group 条件分组下获取随机个记录 数据构造 create table class_teacher_info ( id serial not null primary key, class_id int not null, teacher_id int not null ); insert into class_teacher_info (class_id, teacher_id) values (1, 1); insert into class_teacher_info (class_id, teacher_id) values (1, 2); insert into class_teacher_info (class_id, teacher_id) values (1, 3); insert into class_teacher_info (class_id, teacher_id) values (1, 4); insert into class_teacher_info (class_id, teacher_id) values (1, 5); insert into class_teacher_info (class_id, teacher_id) values (2, 1); insert into class_teacher_info (class_id, teacher_id) values (2, 2); insert into class_teacher_info (class_id, teacher_id) values (2, 3); insert into class_teacher_info (class_id, teacher_id) values (2, 4); insert into class_teacher_info (class_id, teacher_id) values (2, 5);","head":[["meta",{"property":"og:url","content":"https://logycoconut.github.io/03_Resource/tech/issure/postgresql/PostgreSQL%20%E7%9A%84%E5%A5%87%E5%A6%99%E7%94%A8%E6%B3%95%20-%20%E8%8E%B7%E5%8F%96%E5%88%86%E7%BB%84%E5%89%8D%E5%87%A0%E4%B8%AA%E8%AE%B0%E5%BD%95.html"}],["meta",{"property":"og:title","content":"PostgreSQL 的奇妙用法 - 获取分组前几个记录"}],["meta",{"property":"og:description","content":"背景 在以某列为 group 条件分组下获取随机个记录 数据构造 create table class_teacher_info ( id serial not null primary key, class_id int not null, teacher_id int not null ); insert into class_teacher_info (class_id, teacher_id) values (1, 1); insert into class_teacher_info (class_id, teacher_id) values (1, 2); insert into class_teacher_info (class_id, teacher_id) values (1, 3); insert into class_teacher_info (class_id, teacher_id) values (1, 4); insert into class_teacher_info (class_id, teacher_id) values (1, 5); insert into class_teacher_info (class_id, teacher_id) values (2, 1); insert into class_teacher_info (class_id, teacher_id) values (2, 2); insert into class_teacher_info (class_id, teacher_id) values (2, 3); insert into class_teacher_info (class_id, teacher_id) values (2, 4); insert into class_teacher_info (class_id, teacher_id) values (2, 5);"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-12-10T12:09:39.000Z"}],["meta",{"property":"article:author","content":"logycoconut"}],["meta",{"property":"article:modified_time","content":"2023-12-10T12:09:39.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"PostgreSQL 的奇妙用法 - 获取分组前几个记录\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-12-10T12:09:39.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"logycoconut\\",\\"url\\":\\"https://github.com/logycoconut\\"}]}"]]},"headers":[{"level":3,"title":"背景","slug":"背景","link":"#背景","children":[]},{"level":3,"title":"数据构造","slug":"数据构造","link":"#数据构造","children":[]},{"level":3,"title":"获取分组前 n 个记录","slug":"获取分组前-n-个记录","link":"#获取分组前-n-个记录","children":[]}],"git":{"createdTime":1702210179000,"updatedTime":1702210179000,"contributors":[{"name":"logycoconut","email":"logycoconut@foxmail.com","commits":1}]},"readingTime":{"minutes":0.6,"words":180},"filePathRelative":"03_Resource/tech/issure/postgresql/PostgreSQL 的奇妙用法 - 获取分组前几个记录.md","localizedDate":"2023年12月10日","excerpt":"<h3> 背景</h3>\\n<p>在以某列为 group 条件分组下获取随机个记录</p>\\n<h3> 数据构造</h3>\\n<div class=\\"language-sql line-numbers-mode\\" data-ext=\\"sql\\"><pre class=\\"language-sql\\"><code><span class=\\"token keyword\\">create</span> <span class=\\"token keyword\\">table</span> class_teacher_info  \\n<span class=\\"token punctuation\\">(</span>  \\n    id <span class=\\"token keyword\\">serial</span> <span class=\\"token operator\\">not</span> <span class=\\"token boolean\\">null</span> <span class=\\"token keyword\\">primary</span> <span class=\\"token keyword\\">key</span><span class=\\"token punctuation\\">,</span>  \\n    class_id <span class=\\"token keyword\\">int</span> <span class=\\"token operator\\">not</span> <span class=\\"token boolean\\">null</span><span class=\\"token punctuation\\">,</span>  \\n    teacher_id <span class=\\"token keyword\\">int</span> <span class=\\"token operator\\">not</span> <span class=\\"token boolean\\">null</span>  \\n<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>  \\n  \\n<span class=\\"token keyword\\">insert</span> <span class=\\"token keyword\\">into</span> class_teacher_info <span class=\\"token punctuation\\">(</span>class_id<span class=\\"token punctuation\\">,</span> teacher_id<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">values</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">1</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>  \\n<span class=\\"token keyword\\">insert</span> <span class=\\"token keyword\\">into</span> class_teacher_info <span class=\\"token punctuation\\">(</span>class_id<span class=\\"token punctuation\\">,</span> teacher_id<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">values</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">2</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>  \\n<span class=\\"token keyword\\">insert</span> <span class=\\"token keyword\\">into</span> class_teacher_info <span class=\\"token punctuation\\">(</span>class_id<span class=\\"token punctuation\\">,</span> teacher_id<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">values</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">3</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>  \\n<span class=\\"token keyword\\">insert</span> <span class=\\"token keyword\\">into</span> class_teacher_info <span class=\\"token punctuation\\">(</span>class_id<span class=\\"token punctuation\\">,</span> teacher_id<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">values</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">4</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>  \\n<span class=\\"token keyword\\">insert</span> <span class=\\"token keyword\\">into</span> class_teacher_info <span class=\\"token punctuation\\">(</span>class_id<span class=\\"token punctuation\\">,</span> teacher_id<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">values</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">5</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>  \\n<span class=\\"token keyword\\">insert</span> <span class=\\"token keyword\\">into</span> class_teacher_info <span class=\\"token punctuation\\">(</span>class_id<span class=\\"token punctuation\\">,</span> teacher_id<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">values</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">2</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">1</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>  \\n<span class=\\"token keyword\\">insert</span> <span class=\\"token keyword\\">into</span> class_teacher_info <span class=\\"token punctuation\\">(</span>class_id<span class=\\"token punctuation\\">,</span> teacher_id<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">values</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">2</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">2</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>  \\n<span class=\\"token keyword\\">insert</span> <span class=\\"token keyword\\">into</span> class_teacher_info <span class=\\"token punctuation\\">(</span>class_id<span class=\\"token punctuation\\">,</span> teacher_id<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">values</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">2</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">3</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>  \\n<span class=\\"token keyword\\">insert</span> <span class=\\"token keyword\\">into</span> class_teacher_info <span class=\\"token punctuation\\">(</span>class_id<span class=\\"token punctuation\\">,</span> teacher_id<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">values</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">2</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">4</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>  \\n<span class=\\"token keyword\\">insert</span> <span class=\\"token keyword\\">into</span> class_teacher_info <span class=\\"token punctuation\\">(</span>class_id<span class=\\"token punctuation\\">,</span> teacher_id<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">values</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">2</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">5</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{s as data};
