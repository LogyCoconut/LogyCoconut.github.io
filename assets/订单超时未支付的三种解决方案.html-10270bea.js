const t=JSON.parse('{"key":"v-342f0cca","path":"/00_inbox/%E5%9C%BA%E6%99%AF/%E8%AE%A2%E5%8D%95%E8%B6%85%E6%97%B6%E6%9C%AA%E6%94%AF%E4%BB%98%E7%9A%84%E4%B8%89%E7%A7%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html","title":"订单超时未支付的三种解决方案","lang":"zh-CN","frontmatter":{"title":"订单超时未支付的三种解决方案","date":"2023-03-12T00:00:00.000Z","tag":[],"description":"用户下单之后未支付，需要实现超时自动取消订单 懒删除 不用自动更新订单状态，而是在再一次查询订单状态时发现订单超时，这时候才去更新订单状态为「已超时」 扫表轮训 较为常用的一种方案 如果对于实时性要求不高的话可以采用这种方案 通过一个定时任务，例如间隔 5 秒查询最近 30 分钟创建的订单，如果发现「未支付」的订单，则更新为「已超时」 延迟队列 像 RocketMQ 之类的消息队列都提供了延迟队列的能力，可以在用户下单的同时发送一个「用户订单超时确认」的消息，在指定时间后消费，例如 10 秒，同时消费端做好业务处理 如果系统的 MQ 版本过老，可能没有延迟消费的能力，可以自己简单实现一个延迟服务，通过时间轮的方式","head":[["meta",{"property":"og:url","content":"https://logycoconut.github.io/00_inbox/%E5%9C%BA%E6%99%AF/%E8%AE%A2%E5%8D%95%E8%B6%85%E6%97%B6%E6%9C%AA%E6%94%AF%E4%BB%98%E7%9A%84%E4%B8%89%E7%A7%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html"}],["meta",{"property":"og:title","content":"订单超时未支付的三种解决方案"}],["meta",{"property":"og:description","content":"用户下单之后未支付，需要实现超时自动取消订单 懒删除 不用自动更新订单状态，而是在再一次查询订单状态时发现订单超时，这时候才去更新订单状态为「已超时」 扫表轮训 较为常用的一种方案 如果对于实时性要求不高的话可以采用这种方案 通过一个定时任务，例如间隔 5 秒查询最近 30 分钟创建的订单，如果发现「未支付」的订单，则更新为「已超时」 延迟队列 像 RocketMQ 之类的消息队列都提供了延迟队列的能力，可以在用户下单的同时发送一个「用户订单超时确认」的消息，在指定时间后消费，例如 10 秒，同时消费端做好业务处理 如果系统的 MQ 版本过老，可能没有延迟消费的能力，可以自己简单实现一个延迟服务，通过时间轮的方式"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-04-06T11:58:37.000Z"}],["meta",{"property":"article:author","content":"logycoconut"}],["meta",{"property":"article:published_time","content":"2023-03-12T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-04-06T11:58:37.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"订单超时未支付的三种解决方案\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-03-12T00:00:00.000Z\\",\\"dateModified\\":\\"2023-04-06T11:58:37.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"logycoconut\\",\\"url\\":\\"https://github.com/logycoconut\\"}]}"]]},"headers":[{"level":3,"title":"懒删除","slug":"懒删除","link":"#懒删除","children":[]},{"level":3,"title":"扫表轮训","slug":"扫表轮训","link":"#扫表轮训","children":[]},{"level":3,"title":"延迟队列","slug":"延迟队列","link":"#延迟队列","children":[]}],"git":{"createdTime":1680782317000,"updatedTime":1680782317000,"contributors":[{"name":"logycoconut","email":"logycoconut@foxmail.com","commits":1}]},"readingTime":{"minutes":0.94,"words":282},"filePathRelative":"00_inbox/场景/订单超时未支付的三种解决方案.md","localizedDate":"2023年3月12日","excerpt":"<blockquote>\\n<p>用户下单之后未支付，需要实现超时自动取消订单</p>\\n</blockquote>\\n<h3> 懒删除</h3>\\n<p>不用自动更新订单状态，而是在再一次查询订单状态时发现订单超时，这时候才去更新订单状态为「已超时」</p>\\n<h3> 扫表轮训</h3>\\n<p>较为常用的一种方案</p>\\n<p>如果对于实时性要求不高的话可以采用这种方案</p>\\n<p>通过一个定时任务，例如间隔 5 秒查询最近 30 分钟创建的订单，如果发现「未支付」的订单，则更新为「已超时」</p>\\n<h3> 延迟队列</h3>\\n<ul>\\n<li>像 RocketMQ 之类的消息队列都提供了延迟队列的能力，可以在用户下单的同时发送一个「用户订单超时确认」的消息，在指定时间后消费，例如 10 秒，同时消费端做好业务处理</li>\\n<li>如果系统的 MQ 版本过老，可能没有延迟消费的能力，可以自己简单实现一个延迟服务，通过时间轮的方式</li>\\n</ul>","autoDesc":true}');export{t as data};
