import{_ as a}from"./plugin-vue_export-helper-c27b6911.js";import{o as s,c as n,f as e}from"./app-5c7b1a68.js";const o={},p=e(`<h3 id="服务在容器中启动不了" tabindex="-1"><a class="header-anchor" href="#服务在容器中启动不了" aria-hidden="true">#</a> 服务在容器中启动不了</h3><p>升级到 <code>JDK 17</code> 后, 服务在 <code>K8S</code> 中启动遇到了一个问题</p><p><code>java.lang.reflect.InaccessibleObjectException</code></p><p>由于 <code>Java 17</code> 的模块化设计, 有些 <code>JDK</code> 的内部类不能被访问了, 例如 <code>lang</code> 包、<code>math</code> 包等</p><p>所以需要在 JVM Option 中增加特定参数</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token operator">--</span>add<span class="token operator">-</span><span class="token keyword">opens</span> <span class="token namespace">java<span class="token punctuation">.</span>base</span><span class="token operator">/</span>java<span class="token punctuation">.</span>lang<span class="token operator">=</span><span class="token constant">ALL</span><span class="token operator">-</span><span class="token constant">UNNAMED</span>
<span class="token operator">--</span>add<span class="token operator">-</span><span class="token keyword">opens</span> <span class="token namespace">java<span class="token punctuation">.</span>base</span><span class="token operator">/</span>java<span class="token punctuation">.</span>util<span class="token operator">=</span><span class="token constant">ALL</span><span class="token operator">-</span><span class="token constant">UNNAMED</span>
<span class="token operator">--</span>add<span class="token operator">-</span><span class="token keyword">opens</span> <span class="token namespace">java<span class="token punctuation">.</span>base</span><span class="token operator">/</span>java<span class="token punctuation">.</span>nio<span class="token operator">=</span><span class="token constant">ALL</span><span class="token operator">-</span><span class="token constant">UNNAMED</span>
<span class="token operator">--</span>add<span class="token operator">-</span><span class="token keyword">opens</span> <span class="token namespace">java<span class="token punctuation">.</span>base</span><span class="token operator">/</span>sun<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>ch<span class="token operator">=</span><span class="token constant">ALL</span><span class="token operator">-</span><span class="token constant">UNNAMED</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对于 <code>Docker</code> 应用来说, 则需要在启动的时候同样加上以上参数<br><em>伪代码, 未经过测试</em></p><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">FROM</span> openjdk11</span>
<span class="token instruction"><span class="token keyword">COPY</span> ./test.jar /test.jar</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
<span class="token instruction"><span class="token keyword">ENV</span> JAR_FILE=<span class="token string">&quot;test.jar&quot;</span></span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [ <span class="token string">&quot;sh&quot;</span>, <span class="token string">&quot;-c&quot;</span>, <span class="token string">&quot;java $JAVA_OPTS -jar --add-opens java.base/java.lang=ALL-UNNAMED --add-opens java.base/java.util=ALL-UNNAMED $JAR_FILE&quot;</span>  ]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="一些框架对-jdk-17-的适配情况" tabindex="-1"><a class="header-anchor" href="#一些框架对-jdk-17-的适配情况" aria-hidden="true">#</a> 一些框架对 JDK 17 的适配情况</h3><ul><li><code>Zookeeper:3.6.2</code></li></ul>`,10),t=[p];function c(l,r){return s(),n("div",null,t)}const k=a(o,[["render",c],["__file","项目中升级 JDK 17 遇到的一些问题.html.vue"]]);export{k as default};
