---
title: 「系统设计」 - 直播弹幕系统设计
tag: [] 
tags:
  - 直播
---

# 「系统设计」 - 直播弹幕系统设计

### 特点

> 类似 IM 即时通讯系统，是个变种，本质也是在一个空间内收发消息

- 消息及时性强，过期消息意义不大
- 用户松散，随时来随时走
- 可能有瞬时大批量弹幕（比如比赛精彩部分）
- 流量特点：读多写少

### 弹幕数据结构

```go
type Bullet struct{
     UserId           int         // 用户 ID
     Content        string    // 内容
     Timestamp    int        // 弹幕发送时间
     Extra              *Extra   // 效果、样式
}
```

*如果是视频弹幕的话，时间可能只需要记录偏移时间即可*